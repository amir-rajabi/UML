<div class="settings-ctr">
    <div class="settings-title">MODELS</div>
    <div class="settings-description"></div>
    <div class="line"></div>

    <div class="settings-contents">
        <div id="current_model_ctr">
            <div class="model_ctr_headline">Current model</div>
            <div class="card text-bg-dark mb-3">
                <div class="card-body">
                    <table class="table" data-bs-theme="dark">
                        <tbody>
                        <tr></tr>
                        <tr>
                            <td>Accuracy</td>
                            <td><span id="current-acc-model">99</span> %</td>
                        </tr>
                        <tr>
                            <td>Total epochs trained</td>
                            <td><span id="current-model-epochs">123</span></td>
                        </tr>
                        </tbody>
                    </table>   
                    <div class="history-restore-ctr">
                        <button type="button" class="btn btn-success" id="save_current_model" data-bs-toggle="modal" data-bs-target="#save-current-model-popup">Save current model</button>
                    </div>                       
                </div>
            </div>
        </div>
        <div class="line"></div>
        <div id="saved_models_ctr">
            <script>
                function delete_model(index){
                    var modalElement = "reset_model_window_" + index;
                    var model_acc = "acc-item-ctr-" + index;
                    var model_name_ctr = "acc-saved-models-headtitle-" + index;
                    var model_name = document.getElementById(model_name_ctr).textContent;

                    document.getElementById(modalElement).remove();
                    document.getElementById(model_acc).remove();

                    var xhr0 = new XMLHttpRequest();
                    xhr0.open('POST', '/delete_model', true);
                    xhr0.setRequestHeader('Content-Type', 'application/json');
                    xhr0.send(JSON.stringify( model_name ));

                    var allModels = document.getElementById('saved_models_frontend').innerHTML;
                    var xhr = new XMLHttpRequest();
                    xhr.open('POST', '/saved_models_html', true);
                    xhr.setRequestHeader('Content-Type', 'application/json');
                    xhr.send(JSON.stringify({ savedModelsHTML: allModels }));
                }
            </script>
            <div class="model_ctr_headline">Saved models</div>
            <div id="saved_models_frontend">
                <div class="accordion " id="acc_saved_models" data-bs-theme="dark"></div>
                <div id="delete_model_modals"></div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="save-current-model-popup" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-bs-theme="dark">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Saving model</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div class="input-group mb-3">
                <span class="input-group-text" id="new-model-name">>></span>
                <input id="model_name" type="text" class="form-control" placeholder="Type in a name for the model" aria-label="modelname" aria-describedby="basic-addon1" style="cursor: text;" maxlength="20">
              </div>
        </div>
        <div id="too-long-alert" style="padding-right: var(--bs-modal-padding); padding-left: var(--bs-modal-padding); display:none;">
            <div class="alert alert-warning" role="alert">
                Maximum number of characters reached.
            </div>
        </div>
        <div id="already-taken-alert" style="padding-right: var(--bs-modal-padding); padding-left: var(--bs-modal-padding); display:none;">
            <div class="alert alert-danger" role="alert">
                This name is already taken.
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-success" id="save-current-model" data-bs-dismiss="modal" disabled>Save model</button>
        </div>
      </div>
    </div>
</div>